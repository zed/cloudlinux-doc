(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{206:function(t,e,s){"use strict";s.r(e);var a=s(0),i=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("ul",[s("li",[s("router-link",{attrs:{to:"/deprecated/#git-for-cpanel"}},[t._v("Git for cPanel")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/deprecated/#lve-stats-0-x"}},[t._v("LVE-Stats 0.x")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/deprecated/#optimumcache"}},[t._v("OptimumCache")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/deprecated/#tpe-extension"}},[t._v("TPE extension")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/deprecated/#cpu-limits"}},[t._v("CPU limits")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/deprecated/#package-integration"}},[t._v("Package integration")]),t._v(". You can use "),s("router-link",{attrs:{to:"/control_panel_integration/"}},[t._v("Control panel integration guide")]),t._v(" instead.")],1)]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),s("p",[t._v("Please note that this package is no longer needed, as since cPanel 11.38, you can install git without any issues on cPanel by running:")]),t._v(" "),t._m(3),t._v(" "),s("p",[t._v("To install "),s("a",{attrs:{href:"http://git-scm.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("git"),s("OutboundLink")],1),t._v(" on cPanel servers:")]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("LVE-STATS-0.X IS NO LONGER SUPPORTED, PLEASE USE "),s("router-link",{attrs:{to:"/lve-stats_2/"}},[t._v("LVE-STATS 2")])],1)]),t._v(" "),s("p",[t._v("lve-stats package collects LVE usage statistics and allows to query the data.")]),t._v(" "),s("p",[t._v("To install, run:")]),t._v(" "),t._m(6),t._v(" "),s("p",[t._v("If you are already running lve-stats (in case you are running cPanel LVE plugin), run:")]),t._v(" "),t._m(7),t._v(" "),s("p",[t._v("This should also be updated automatically next time your system runs system wide update.")]),t._v(" "),s("p",[t._v("The package installs lvestats-server. You can re-start the server by running:")]),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),s("p",[t._v("Package consists of lveinfo utility to query LVE usage, and lvechart that allows you to chart usage for individual LVE.")]),t._v(" "),t._m(11),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v("\nDisplay LVE info about user "),s("span",{staticClass:"notranslate"},[t._v(" web2 ")]),t._v(" , from Oct 10, 2010 to Oct 15, 2010:\n"),t._m(19),t._v(" "),t._m(20),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("LVE-STATS-0.X IS NO LONGER SUPPORTED, PLEASE USE "),s("router-link",{attrs:{to:"/lve-stats_2/"}},[t._v("LVE-STATS 2")])],1)]),t._v(" "),s("p",[t._v("You have to install MySQL-python rpm to store lve-stats on centralized server. Run:")]),t._v(" "),t._m(21),t._v(" "),s("p",[t._v("If you have MySQL 5.3+ installed on CloudLinux 5 server, and there is no libmysqlclient_r.so.15 on the server, run:")]),t._v(" "),t._m(22),t._v(" "),s("p",[t._v("A typical procedure to configure the MySQL database for storing information about multiple servers for lve-stats services looks as follows:")]),t._v(" "),s("p",[t._v("Create database and user. You can do it by executing the following commands:")]),t._v(" "),t._m(23),t._v(" "),s("p",[t._v("Create database schema:")]),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),s("p",[t._v("Restart service:")]),t._v(" "),t._m(32),t._v(" "),s("p",[t._v("If you use central database to store lvestats data, on each server, execute:")]),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),s("p",[t._v("If you are using MySQL or PostgreSQL server for lve-stats older then 0.8, make sure to do the following steps to upgrade to latest version:")]),t._v(" "),s("p",[t._v("Stop lvestats service on all your servers.")]),t._v(" "),s("p",[t._v("Connect to your database server, and execute following commands:")]),t._v(" "),t._m(36),t._v("\nTo upgrade scheme to support "),s("span",{staticClass:"notranslate"},[t._v(" MySQL Governor: ")]),t._v(" "),t._m(37),t._v("\nUpgrading from lve-stats < 0.9-20:\n"),t._m(38),t._v("\nUpdate lve-stats RPM on all your servers.\n"),s("p",[t._v("If you use central database to store lvestats data, execute the following commands:")]),t._v(" "),t._m(39),t._v("\nOn each server execute:\n"),t._m(40),t._v(" "),s("p",[t._v("You just need to execute it once, as it will be later executed via cron job. That script will store usernames from each server, so that lve-stats would later be able to correctly identify each user.")]),t._v(" "),t._m(41),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("LVE-STATS-0.X IS NO LONGER SUPPORTED, PLEASE USE "),s("router-link",{attrs:{to:"/lve-stats_2/"}},[t._v("LVE-STATS 2")])],1)]),t._v(" "),t._m(42),t._v(" "),s("p",[t._v("Run:")]),t._v(" "),t._m(43),t._v(" "),s("p",[t._v("A typical procedure to configure the PostgreSQL database for storing information about multiple servers for lve-stats services looks as follows:")]),t._v(" "),s("p",[t._v("Create a database and a user. You can do it by executing the following commands:")]),t._v(" "),t._m(44),t._v("\nCreate database schema:\n"),t._m(45),t._v("\nOn each server edit file "),s("span",{staticClass:"notranslate"},[t._v("`/etc/sysconfig/lvestats`")]),t._v(" and "),s("span",{staticClass:"notranslate"},[t._v("`/etc/sysconfig/lvestats`")]),t._v(" as follows:\n"),t._m(46),t._v(" "),t._m(47),t._v(" "),t._m(48),t._v(" "),t._m(49),t._v(" "),t._m(50),t._v(" "),t._m(51),t._v(" "),s("p",[t._v("Restart service:")]),t._v(" "),t._m(52),t._v("\nIf you use central database to store lvestats data, on each server, execute:\n"),t._m(53),t._v("\nYou just need to execute it once, as it will be later executed via "),s("span",{staticClass:"notranslate"},[t._v(" cron job ")]),t._v(" . That script will store usernames from each server, so that lve-stats would later be able to correctly identify each user.\n"),s("p",[t._v("You are done!")]),t._v(" "),t._m(54),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("LVE-STATS-0.X IS NO LONGER SUPPORTED, PLEASE USE "),s("router-link",{attrs:{to:"/lve-stats_2/"}},[t._v("LVE-STATS 2")])],1)]),t._v(" "),s("p",[t._v("[lve-stats 0.10+]")]),t._v(" "),s("p",[t._v("When you have multiple servers storing LVE statistics to a central database, then you will need to pick one server responsible for compacting data.")]),t._v(" "),t._m(55),t._v(" "),t._m(56),t._v(" "),t._m(57),t._v(" "),t._m(58),t._v(" "),t._m(59),t._v(" "),t._m(60),t._v(" "),t._m(61),t._v(" "),s("p",[t._v("With OptimumCache, if a duplicate of an already loaded file is requested, the file gets loaded from filesystem cache. By doing that, system bypasses disk IO, significantly improving the speed of reading that file, while lowering load on the hard disk. As the file had been read from disk just once, it is cached by filesystem cache just once, minimizing amount of duplicates in file system cache and improving overall cache efficiency. This in turn reduces memory usage, decreases the number of disk operations - all while improving the websites response time.")]),t._v(" "),s("p",[t._v("Further reading: "),s("a",{attrs:{href:"http://kb.cloudlinux.com/tag/optimumcache/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://kb.cloudlinux.com/tag/optimumcache/"),s("OutboundLink")],1)]),t._v(" "),t._m(62),t._v(" "),t._m(63),t._v(" "),t._m(64),t._v(" "),t._m(65),t._v(" "),t._m(66),t._v(" "),t._m(67),t._v(" "),s("p",[t._v("OptimumCache must be provided with list of directories to expect duplicate files be in:")]),t._v(" "),t._m(68),t._v(" "),s("p",[t._v("OptimumCache is going to index these directories. Thus system load during this period (from hours to days) might be as twice as high. See "),s("router-link",{attrs:{to:"/deprecated/#marking-directories"}},[t._v("Marking directories")]),t._v(".")],1),t._v(" "),t._m(69),t._v(" "),t._m(70),t._v(" "),t._m(71),t._v(" "),t._m(72),t._v(" "),s("p",[t._v("Allocating OptimumCache disk space for ploop on a fast drives (like SSD) will provide additional performance improvement as more duplicated files would be loaded from fast disks into memory.")]),t._v(" "),t._m(73),t._v(" "),t._m(74),t._v(" "),t._m(75),t._v(" "),s("p",[t._v("Example:")]),t._v(" "),t._m(76),t._v(" "),t._m(77),t._v(" "),t._m(78),t._v(" "),s("p",[t._v("To turn on ploop:")]),t._v(" "),t._m(79),t._v(" "),s("p",[t._v("To disable ploop:")]),t._v(" "),t._m(80),t._v(" "),t._m(81),t._v(" "),t._m(82),t._v(" "),t._m(83),t._v(" "),s("p",[t._v("To resize ploop:")]),t._v(" "),t._m(84),t._v(" "),t._m(85),t._v(" "),t._m(86),t._v(" "),t._m(87),t._v(" "),t._m(88),t._v(" "),s("p",[t._v("Q. I created/resized/moved/deleted ploop. Do I need to rerun the initial mark process?")]),t._v(" "),s("p",[t._v("А. Not needed.")]),t._v(" "),t._m(89),t._v(" "),t._m(90),t._v(" "),t._m(91),t._v(" "),t._m(92),t._v(" "),t._m(93),t._v(" "),t._m(94),t._v(" "),t._m(95),t._v(" "),t._m(96),t._v(" "),t._m(97),t._v(" "),t._m(98),t._v(" "),s("p",[t._v("In common scenario admin marks for caching user directories:")]),t._v(" "),t._m(99),t._v(" "),t._m(100),t._v(" "),t._m(101),t._v(" "),s("p",[t._v("OptimumCache tracks files & directories that need to be cached. Once file is modified, it will no longer be tracked by OptimumCache (as there is very little chance that it will have a duplicate). Yet, all new files created in tracked directories are checked for duplicates.")]),t._v(" "),s("p",[t._v("Sometimes you might want to ignore such checks for directories where large number of temporary or new files are created, that will not have duplicates - as such checks are expensive. Directories like mail queue, and tmp directories should be ignored.")]),t._v(" "),s("p",[t._v("You can set a regexp mask for directories that you would like to ignore using:")]),t._v(" "),t._m(102),t._v(" "),s("p",[t._v("To list skip masks:")]),t._v(" "),t._m(103),t._v(" "),s("p",[t._v("To remove skip mask:")]),t._v(" "),t._m(104),t._v(" "),s("p",[t._v("At the very end, for those changes to take effect:")]),t._v(" "),t._m(105),t._v(" "),t._m(106),t._v(" "),s("p",[t._v("By default, OptimumCache sets up following skip masks:")]),t._v(" "),t._m(107),t._v(" "),t._m(108),t._v(" "),t._m(109),t._v(" "),s("p",[t._v("Skip masks use following regexp syntax: "),s("a",{attrs:{href:"http://www.greenend.org.uk/rjk/tech/regexp.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.greenend.org.uk/rjk/tech/regexp.html"),s("OutboundLink")],1)]),t._v(" "),t._m(110),t._v(" "),t._m(111),t._v(" "),t._m(112),t._v(" "),t._m(113),t._v(" "),t._m(114),t._v(" "),t._m(115),t._v(" "),t._m(116),t._v(" "),t._m(117),t._v(" "),t._m(118),t._v(" "),t._m(119),t._v(" "),t._m(120),t._v(" "),t._m(121),t._v(" "),s("p",[t._v("Display numbers/percents of cached files:")]),t._v(" "),t._m(122),t._v(" "),s("p",[t._v("or")]),t._v(" "),t._m(123),t._v(" "),s("p",[t._v("To display statistic for specific mount. In depth display what is being held in cache:")]),t._v(" "),t._m(124),t._v(" "),t._m(125),t._v(" "),s("p",[t._v("Optional Arguments:")]),t._v(" "),t._m(126),t._v(" "),t._m(127),t._v(" "),t._m(128),t._v(" "),t._m(129),t._v(" "),s("p",[t._v("Installing this package automatically starts system load statistics collection in background. cloudlinux-collectl package has no strict dependency on OptimumCache, thus the statistics is collected regardless of whether OptimumCache is installed or not. The aim of having this package pre-installed is to compare system performance before and after installing OptimumCache, thus to measure OptimumCache effectiveness.")]),t._v(" "),t._m(130),t._v(" "),t._m(131),t._v(" "),t._m(132),t._v(" "),t._m(133),t._v(" "),s("p",[t._v("cloudlinux-collectl can monitor response time for a configurable set of URLs.")]),t._v(" "),s("p",[t._v("Start monitoring new URL:")]),t._v(" "),t._m(134),t._v(" "),s("p",[t._v("Example:")]),t._v(" "),t._m(135),t._v(" "),t._m(136),t._v(" "),t._m(137),t._v(" "),t._m(138),t._v(" "),t._m(139),t._v(" "),t._m(140),t._v(" "),s("p",[t._v("To monitor what statistics are being collected, try command:")]),t._v(" "),t._m(141),t._v(" "),t._m(142),t._v(" "),t._m(143),t._v(" "),t._m(144),t._v(" "),t._m(145),t._v(" "),t._m(146),t._v(" "),s("p",[t._v("Particularly, the last column percent numbers shall match.")]),t._v(" "),t._m(147),t._v(" "),t._m(148),t._v(" "),t._m(149),t._v(" "),t._m(150),t._v(" "),t._m(151),t._v(" "),s("p",[t._v("To add another URL for monitoring:")]),t._v(" "),t._m(152),t._v(" "),s("p",[t._v("To display URLs being monitored list:")]),t._v(" "),t._m(153),t._v(" "),t._m(154),t._v(" "),s("p",[t._v("To skip URL from being tracked run command:")]),t._v(" "),t._m(155),t._v(" "),t._m(156),t._v(" "),t._m(157),t._v(" "),t._m(158),t._v(" "),t._m(159),t._v(" "),s("p",[t._v("To start /stop:")]),t._v(" "),t._m(160),t._v(" "),t._m(161),t._v(" "),t._m(162),t._v(" "),s("p",[t._v("To convert those info format suitable for loading into Excel, LibreOffice Calc, another data mining tool, run the command:")]),t._v(" "),t._m(163),t._v(" "),t._m(164),t._v(" "),t._m(165),t._v(" "),t._m(166),t._v(" "),s("p",[t._v("To uninstall OptimumCache, run:")]),t._v(" "),t._m(167),t._v(" "),s("p",[t._v("If available, reboot server")]),t._v(" "),t._m(168),t._v(" "),s("p",[t._v("For OptimumCache version prior 0.2-11, uninstalling via rpm package manager does not automatically removes away ploop image. That is because not always possible to unmount it properly due to kernel dependency. If there is no luck with unmounting ploop, then the server will have to be rebooted and will need to remove ploop files manually:")]),t._v(" "),t._m(169),t._v("\n or\n"),t._m(170),t._v(" "),s("p",[t._v("For OptimumCache version 0.2-11 and later, ploop image will be removed automatically during uninstall. If ploop unmount issue prevents doing that, ploop image clean up will be scheduled after next server reboot.")]),t._v(" "),s("p",[t._v("If uninstall OptimumCache process lasts for too long, please find the solution in Troubleshooting section of this document.")]),t._v(" "),t._m(171),t._v(" "),t._m(172),t._v(" "),t._m(173),t._v(" "),s("p",[t._v("For now Ext4 is the only supported file system type. If a host has no Ext4 filesystem mounted, OptimumCache package installation will be abandoned:")]),t._v(" "),t._m(174),t._v(" "),s("p",[t._v("Also, an attempt to add for caching directory, which does not reside on Ext4, will fail:")]),t._v(" "),t._m(175),t._v(" "),t._m(176),t._v(" "),t._m(177),t._v(" "),t._m(178),t._v(" "),t._m(179),t._v(" "),t._m(180),t._v(" "),t._m(181),t._v(" "),t._m(182),t._v(" "),t._m(183),t._v(" "),t._m(184),t._v(" "),t._m(185),t._v(" "),t._m(186),t._v(" "),t._m(187),t._v(" "),t._m(188),t._v(" "),t._m(189),t._v(" "),t._m(190),t._v(" "),s("p",[t._v("To update to version 0.2-6, run:")]),t._v(" "),t._m(191),t._v(" "),t._m(192),t._v(" "),t._m(193),t._v(" "),t._m(194),t._v(" "),t._m(195),t._v(" "),t._m(196),t._v(" "),t._m(197),t._v(" "),t._m(198),t._v(" "),t._m(199),t._v(" "),t._m(200),t._v(" "),t._m(201),t._v(" "),s("p",[t._v("This command will cancel unmark operation, being run by yum under the hood. So that yum uninstall package transaction will complete very soon.")]),t._v(" "),t._m(202),t._v(" "),t._m(203),t._v(" "),t._m(204),t._v(" "),t._m(205),t._v(" "),t._m(206),t._v(" "),t._m(207),t._m(208),t._v(" "),t._m(209),t._m(210),t._v(" "),s("p",[t._v("And do:\n")]),t._m(211),t._v(" "),t._m(212),t._v(" "),t._m(213),t._v(" "),t._m(214),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("Deprecated")]),t._v(" "),s("p",[t._v("This limit is no longer used, and "),s("span",{staticClass:"notranslate"},[s("router-link",{attrs:{to:"/limits/#speed-limits"}},[t._v("SPEED")])],1),t._v(" is used instead")])]),t._v(" "),t._m(215),t._v(" "),t._m(216),t._v(" "),t._m(217),t._v(" "),t._m(218),t._v(" "),t._m(219),t._v(" "),t._m(220),t._v(" "),s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("You can use "),s("router-link",{attrs:{to:"/control_panel_integration/"}},[t._v("Control panel integration guide")]),t._v(" instead.")],1)]),t._v(" "),t._m(221),t._v(" "),s("p",[t._v("CloudLinux can automatically detect the most popular control panels, like cPanel - and allows to set different limits for users in different packages. It simplifies management as you don't have to choose between one limit that fits all your customers on the server, or individual limits for the customers.")]),t._v(" "),s("p",[t._v("If you have a custom made control panel, with your own 'package' implementation, you can still use CloudLinux framework to manage limits for your packages.")]),t._v(" "),s("p",[t._v("To do that, you would need:")]),t._v(" "),s("p",[t._v("Implement script that would map users to packages.")]),t._v(" "),s("p",[t._v("Configure lvectl to use your script.")]),t._v(" "),t._m(222),t._v(" "),s("p",[t._v("A script can be written in any language, and it has to be executable.")]),t._v(" "),s("p",[t._v("It should accept the following arguments:")]),t._v(" "),s("p",[t._v("--list-all                        prints [userid package] pairs")]),t._v(" "),s("p",[t._v("Output should look like a list of space separate pairs of user Linux IDs and package names.")]),t._v(" "),t._m(223),t._v(" "),t._m(224),t._v(" "),s("p",[t._v("Output should contain package name, like:")]),t._v(" "),t._m(225),t._v(" "),t._m(226),t._v(" "),s("p",[t._v("Output should look like a list of user Linux IDs.")]),t._v(" "),t._m(227),t._v(" "),t._m(228),t._v(" "),s("p",[t._v("Output contains a list of names of packages, like:")]),t._v(" "),t._m(229),t._v(" "),t._m(230),t._v(" "),t._m(231),t._v(" "),t._m(232),t._v(" "),s("p",[t._v("For the script example please check the following article: "),s("a",{attrs:{href:"https://cloudlinux.zendesk.com/hc/en-us/articles/115004529105-Integrating-LVE-limits-with-packages-for-unsupported-control-panels",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cloudlinux.zendesk.com/hc/en-us/articles/115004529105-Integrating-LVE-limits-with-packages-for-unsupported-control-panels"),s("OutboundLink")],1),t._v(".")])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"deprecated"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deprecated","aria-hidden":"true"}},[this._v("#")]),this._v(" Deprecated")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"git-for-cpanel"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#git-for-cpanel","aria-hidden":"true"}},[this._v("#")]),this._v(" Git for cPanel")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),e("p",[this._v("This package is no longer supported as it may cause dependency issues")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ yum install git\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ yum install git-cpanel\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"lve-stats-0-x"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lve-stats-0-x","aria-hidden":"true"}},[this._v("#")]),this._v(" LVE-Stats 0.x")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ yum install lve-stats\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ yum update lve-stats\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ service lvestats restart\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The package creates sqlite database "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/var/lve/lveinfo.db")])]),this._v(" that stores history information about LVE usage. Up to two months of hourly info is stored for each client. The data for the last hour is stored with 5 minutes interval, and the data for the past 10 minutes is stored with 1 minute interval.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("LVE Stats updates "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/var/lve/info")])]),this._v(" every few seconds. That info is used by "),e("span",{staticClass:"notranslate"},[this._v("LVE Manager")]),this._v(" plugin.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("To query historical LVE info, lveinfo command provided. It is located at "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/usr/sbin/lveinfo")])]),this._v(":\n \n")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("p"),this._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# /usr/sbin/lveinfo [OPTIONS]\n-h --help              : this help screen\n-v, --version          : version number\n-d, --display-username : try to convert LVE id into username when possible\n-f, --from=            : run report from date and time in YYYY-MM-DD HH:MM format\n      if not present last 10 minutes are assumed\n-t, --to=              : run report up to date and time in YYYY-MM-DD HH:MM format\n      if not present, reports results up to now\n-o, --order-by=        : orders results by one of the following:\n      cpu_avg          : average CPU usage\n      cpu_max          : max CPU usage\n      mep_avg          : average number of entry processes (concurrent connections)\n      mep_max          : max number of entry processes (concurrent connections)\n      vmem_avg         : average virtual memory usage\n      vmem_max         : max virtual memory usage\n      pmem_avg         : average physical memory usage\n      pmem_max         : max physical memory usage\n      nproc_avg        : average number of processes usage\n      nproc_max        : max number of processes usage\n      io_avg           : average IO usage\n      io_max           : max IO usage\n      total_mem_faults : total number of out of virtual memory faults (deprecated since 0.8-6)\n      total_vmem_faults: total number of out of virtual memory faults (since 0.8-6)\n      total_pmem_faults: total number of out of physical memory faults (since 0.8-6)\n      total_mep_faults : total number of entry processes faults (deprecated since 0.8-6)\n      total_ep_faults  : total number of entry processes faults (since 0.8-6)\n      total_nproc_faults: total number of number of processes faults (since 0.8-6)\n      any_faults       : total number of any types of faults (since 0.8-6)\n    --id=              : LVE id -- will display record only for that LVE id\n-u, --user=            : Use username instead of LVE id, and show only record for that user\n-l, --limit=           : max number of results to display, 10 by default\n-c, --csv              : display output in CSV format\n-b, --by-usage         : show LVEs with usage (averaged or max) within 90% percent of the limit\n      available values:\n      cpu_avg          : average CPU usage\n      cpu_max          : max CPU usage\n      mep_avg          : average number of entry processes (concurrent connections)\n      ep_avg           : average number of entry processes (since 0.8-6)\n      mep_max          : max number of entry processes (concurrent connections)\n      ep_max           : max number of entry processes (since 0.8-6)\n      mem_avg          : average virtual memory usage\n      mem_max          : max virtual memory usage\n      vmem_avg         : average virtual memory usage\n      vmem_max         : max virtual memory usage\n      pmem_avg         : average physical memory usage\n      pmem_max         : max physical memory usage\n      nproc_avg        : average number of processes\n      nproc_max        : max number of processes\n      io_avg           : average IO usage\n      io_max           : max IO usage\n-p, --percentage       : defines percentage for --by-usage option\n-f, --by-fault         : show LVEs which failed on max entry processes limit or memory limit\n      available values: mem, mep.\n      since 0.8-6      : vmem, pmem, ep, nproc\n    --show-all         : since 0.8-6 only columns for enabled limits will show up. \n-r, --threshold        : in combination with --by-fault, shows only LVEs with number of faults above threshold specified\n    --server_id        : used in combination with centralized storage, to access info from any server\n    --show-all         : full output (show all limits); brief output by default\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("Output")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th")])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("ID")]),t._v(" "),s("td",[t._v("LVE Id or username")])]),t._v(" "),s("tr",[s("td",[t._v("aCPU")]),t._v(" "),s("td",[t._v("Average CPU usage")])]),t._v(" "),s("tr",[s("td",[t._v("mCPU")]),t._v(" "),s("td",[t._v("Max CPU usage")])]),t._v(" "),s("tr",[s("td",[t._v("lCPU")]),t._v(" "),s("td",[t._v("CPU Limit")])]),t._v(" "),s("tr",[s("td",[t._v("aEP")]),t._v(" "),s("td",[t._v("CPU Limit")])]),t._v(" "),s("tr",[s("td",[t._v("mEP")]),t._v(" "),s("td",[t._v("Max Entry Processes")])]),t._v(" "),s("tr",[s("td",[t._v("lEP")]),t._v(" "),s("td",[t._v("Entry Proc limit")])]),t._v(" "),s("tr",[s("td",[t._v("aNPROC")]),t._v(" "),s("td",[t._v("Average Number of Processes")])]),t._v(" "),s("tr",[s("td",[t._v("mNPROC")]),t._v(" "),s("td",[t._v("Max Number of Processes")])]),t._v(" "),s("tr",[s("td",[t._v("lNPROC")]),t._v(" "),s("td",[t._v("Number of Processes limit")])]),t._v(" "),s("tr",[s("td",[t._v("aVMEM")]),t._v(" "),s("td",[t._v("Average virtual Memory Usage")])]),t._v(" "),s("tr",[s("td",[t._v("mVMEM")]),t._v(" "),s("td",[t._v("Max virtual Memory Usage")])]),t._v(" "),s("tr",[s("td",[t._v("lVMEM")]),t._v(" "),s("td",[t._v("Virtual Memory Limit")])]),t._v(" "),s("tr",[s("td",[t._v("aPMEM")]),t._v(" "),s("td",[t._v("Average physical Memory Usage")])]),t._v(" "),s("tr",[s("td",[t._v("mPMEM")]),t._v(" "),s("td",[t._v("Max physical Memory Usage")])]),t._v(" "),s("tr",[s("td",[t._v("lPMEM")]),t._v(" "),s("td",[t._v("Physical Memory Limit")])]),t._v(" "),s("tr",[s("td",[t._v("aIO")]),t._v(" "),s("td",[t._v("Average IO usage")])]),t._v(" "),s("tr",[s("td",[t._v("mIO")]),t._v(" "),s("td",[t._v("Max IO usage")])]),t._v(" "),s("tr",[s("td",[t._v("lIO")]),t._v(" "),s("td",[t._v("IO Limit")])]),t._v(" "),s("tr",[s("td",[t._v("fVMEM")]),t._v(" "),s("td",[t._v("Out Of Virtual Memory Faults")])]),t._v(" "),s("tr",[s("td",[t._v("fPMEM")]),t._v(" "),s("td",[t._v("Out Of Physical Memory Faults")])]),t._v(" "),s("tr",[s("td",[t._v("fEP")]),t._v(" "),s("td",[t._v("Entry processes faults")])]),t._v(" "),s("tr",[s("td",[t._v("fNPROC")]),t._v(" "),s("td",[t._v("Number of processes faults")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("only enabled limits will show up")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("Examples")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Display top 10 users, by max "),e("span",{staticClass:"notranslate"},[this._v(" CPU ")]),this._v(" usage, from Oct 10, 2010 to Oct 15, 2010. Display username if possible:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ lveinfo --from='2010-10-10' --to='2010-10-15' -o cpu_max --display-username \nID        aCPU       mCPU     lCPU      aEP      mEP      lEP       aMem       mMem      lMem      MemF     MepF \n777         7        9        10        0        0        25        10M        15M       1G        0        0 \n300         2        8        10        0        1        25        1M         3M        1G        0        0 \nweb2        1        6        10        0        0        25        17K        18M       1G        0        0 \nweb1        0        0        10        0        0        25        204K       1M        1G        0        0 \n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ lveinfo --from='2010-10-10' --to='2010-10-15' --user=web2 --display-username\nID        aCPU       mCPU     lCPU      aEP      mEP      lEP       aMem       mMem       lMem      MemF     MepF \nweb2        1        6        10        0        0        25        10M        15M        1G        0        0\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"storing-statistics-in-mysql"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#storing-statistics-in-mysql","aria-hidden":"true"}},[this._v("#")]),this._v(" Storing statistics in MySQL")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ yum install MySQL-python\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ yum --enablerepo=cloudlinux-updates-testing install mysqlclient15\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("create database <database>;\ngrant all on <database>.* to <user> identified by 'password';\nflush privileges;\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("CREATE TABLE history (id INTEGER,\n        cpu INTEGER, cpu_limit INTEGER,\n        cpu_max INTEGER,\n        ncpu INTEGER,\n        mep INTEGER, mep_limit INTEGER,\n        mep_max INTEGER,\n        io INTEGER, io_limit INTEGER,\n        mem INTEGER, mem_limit INTEGER,\n        mem_max INTEGER,\n        mem_fault INTEGER, mep_fault INTEGER,\n        created TIMESTAMP, weight INTEGER, server_id CHAR(10),\n        lmemphy INTEGER, memphy INTEGER, memphy_max INTEGER, memphy_fault INTEGER,\n        lnproc INTEGER, nproc INTEGER, nproc_max INTEGER, nproc_fault INTEGER,\n        lcpuw INTEGER, io_max INTEGER,\n        iops INTEGER, liops INTEGER, iops_max INTEGER );\nCREATE INDEX idx_history_id ON history(id);\nCREATE INDEX idx_history_created ON history(created);\nCREATE INDEX idx_history_weight ON history(weight);\nCREATE INDEX idx_history_server_id ON history(server_id);\nCREATE TABLE last_run (hourly TIMESTAMP, daily TIMESTAMP, server_id CHAR(10), lve_version INTEGER);\nCREATE TABLE users (server_id CHAR(10), id INTEGER, username CHAR(20));\nCREATE INDEX idx_users_server_id ON users(server_id);\nCREATE INDEX idx_users_id ON users(id); \n\nCREATE TABLE history_gov ( ts INTEGER,\n                           username CHAR(64),\n                           max_simultaneous_requests INTEGER,\n                           sum_cpu FLOAT,\n                           sum_write FLOAT,\n                           sum_read FLOAT,\n                           number_of_iterations INTEGER,\n                           max_cpu FLOAT,\n                           max_write FLOAT,\n                           max_read FLOAT,\n                           number_of_restricts INTEGER,\n                           limit_cpu_on_period_end INTEGER,\n                           limit_read_on_period_end INTEGER,\n                           limit_write_on_period_end INTEGER,\n                           cause_of_restrict INTEGER,\n                           weight INTEGER,\n                           server_id char(10)); \n\nCREATE INDEX idx_history_gov_ts ON history_gov(ts);\nCREATE INDEX idx_history_gov_cause_of_restrict ON history_gov(cause_of_restrict);\nCREATE INDEX idx_history_gov_number_of_restricts ON history_gov(number_of_restricts); \nCREATE INDEX idx_history_gov_max_simultaneous_requests ON history_gov(max_simultaneous_requests);\nCREATE INDEX idx_history_gov_server_id ON history_gov(server_id);\nCREATE INDEX idx_history_gov_weight ON history_gov(weight);\n\nCREATE TABLE last_run_gov (hourly TIMESTAMP, daily TIMESTAMP, server_id CHAR(10), lve_version INTEGER);\n\n\n* Execute following SQL command for each remote server for which you want to store\nstatistics in this database (make sure you substitute _SERVER_NAME_ with the same\nservername as used in lvestats config file on remote server: \n\nINSERT INTO last_run(hourly, daily, server_id, lve_version) VALUES (UTC_TIMESTAMP(), UTC_TIMESTAMP(), '_SERVER_NAME_', 4);\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("On each server edit file "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/etc/sysconfig/lvestats")])]),this._v(" & "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/etc/sysconfig/lvestats.readonly")])]),this._v(" as follows:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("db_type = mysql\nconnect_string = host:database:user:password\nserver_id = _SERVER_NAME_\ndb_port = _port_\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),e("p",[this._v("lvestats.readonly should have a user that has read only access to all tables from lvestats database.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),e("p",[e("em",[this._v("SERVER_NAME")]),this._v(" should be at most 10 characters")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),e("p",[this._v("db_port is an optional parameter. Default port would be used.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Select server responsible for compacting database on regular bases by setting "),e("span",{staticClass:"notranslate"},[e("code",[this._v("COMPACT=master")])]),this._v(" in "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/etc/sysconfig/lvestats")])]),this._v(" for that server. Set "),e("span",{staticClass:"notranslate"},[this._v(" COMPACT=slave ")]),this._v(" on all other servers.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Make sure that "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/etc/sysconfig/lvestats")])]),this._v(" is readable only by "),e("span",{staticClass:"notranslate"},[e("code",[this._v("root (chmod 600 /etc/sysconfig/lvestats), lvestats.readonly")])]),this._v(" should be readable by anyone")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("service lvestats restart\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ /usr/share/lve-stats/save_users_to_database.py \n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("You just need to execute it once, as it will be later executed via "),e("span",{staticClass:"notranslate"},[this._v(" cron job ")]),this._v(" . That script will store usernames from each server, so that lve-stats would later be able to correctly identify each user.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("Updating MySQL & PostgreSQL schema for lve-stats 0.8+")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("ALTER TABLE history ADD lmemphy INTEGER;\nALTER TABLE history ADD memphy INTEGER;\nALTER TABLE history ADD memphy_max INTEGER;\nALTER TABLE history ADD memphy_fault INTEGER;\nALTER TABLE history ADD lnproc INTEGER;\nALTER TABLE history ADD nproc INTEGER;\nALTER TABLE history ADD nproc_max INTEGER;\nALTER TABLE history ADD nproc_fault INTEGER;\nALTER TABLE history ADD lcpuw INTEGER;\nALTER TABLE history ADD io_max INTEGER;\nUPDATE history SET lmemphy = 0, memphy = 0, memphy_max = 0, memphy_fault = 0,\n       lnproc = 0, nproc = 0, nproc_max = 0, nproc_fault = 0,\n       lcpuw = 0, io_max = 0;\n\nALTER TABLE last_run ADD lve_version INTEGER;\nUPDATE last_run SET lve_version = 4;\nCREATE TABLE last_run_gov (hourly TIMESTAMP, daily TIMESTAMP, server_id CHAR(10), lve_version INTEGER);\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("CREATE TABLE history_gov ( ts INTEGER,\n    username char(64),\n    max_simultaneous_requests INTEGER,\n    sum_cpu float,\n    sum_write float,\n    sum_read float,\n    number_of_iterations INTEGER,\n    max_cpu float,\n    max_write float,\n    max_read float,\n    number_of_restricts INTEGER,\n    limit_cpu_on_period_end INTEGER,\n    limit_read_on_period_end INTEGER,\n    limit_write_on_period_end INTEGER,\n    cause_of_restrict INTEGER,\n    server_id char(10));\n\nCREATE INDEX idx_history_gov_ts ON history_gov(ts);\nCREATE INDEX idx_history_gov_cause_of_restrict ON history_gov(cause_of_restrict);\nCREATE INDEX idx_history_gov_number_of_restricts ON history_gov(number_of_restricts);\nCREATE INDEX idx_history_gov_max_simultaneous_requests ON history_gov(max_simultaneous_requests);\nCREATE INDEX idx_history_gov_server_id ON history_gov(server_id);\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("ALTER TABLE history_gov ADD weight INTEGER;\nCREATE INDEX idx_history_gov_weight ON history_gov(weight);\nCREATE TABLE last_run_gov (hourly TIMESTAMP, daily TIMESTAMP, server_id CHAR(10), lve_version INTEGER);\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("CREATE TABLE users (server_id CHAR(10), id INTEGER, username CHAR(20));CREATE INDEX idx_users_server_id ON users(server_id);CREATE INDEX idx_users_id ON users(id);\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ /usr/share/lve-stats/save_users_to_database.py \n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"storing-statistics-in-postgresql"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#storing-statistics-in-postgresql","aria-hidden":"true"}},[this._v("#")]),this._v(" Storing statistics in PostgreSQL")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("You have to install "),e("span",{staticClass:"notranslate"},[e("code",[this._v("postgresql-python rpm")])]),this._v(" to store lve-stats on centralized server.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ yum install postgresql-python\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("createdb <database>createuser <user>\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("CREATE TABLE history (id INTEGER,\n        cpu INTEGER, cpu_limit INTEGER,\n        cpu_max INTEGER,\n        ncpu INTEGER,\n        mep INTEGER, mep_limit INTEGER,\n        mep_max INTEGER,\n        io INTEGER, io_limit INTEGER,\n        mem INTEGER, mem_limit INTEGER,\n        mem_max INTEGER,\n        mem_fault INTEGER, mep_fault INTEGER,\n        created TIMESTAMP, weight INTEGER, server_id CHAR(10),\n        lmemphy INTEGER, memphy INTEGER, memphy_max INTEGER, memphy_fault INTEGER,\n        lnproc INTEGER, nproc INTEGER, nproc_max INTEGER, nproc_fault INTEGER,\n        lcpuw INTEGER, io_max INTEGER,\n\n\n\n        iops_max: INTEGER, liops: INTEGER, iops: INTEGER);\n\nCREATE INDEX idx_history_id ON history(id);\nCREATE INDEX idx_history_created ON history(created);\nCREATE INDEX idx_history_weight ON history(weight);\nCREATE INDEX idx_history_server_id ON history(server_id);\nCREATE TABLE last_run (hourly TIMESTAMP, daily TIMESTAMP, server_id CHAR(10), lve_version INTEGER);\nCREATE TABLE users (server_id CHAR(10), id INTEGER, username CHAR(20));CREATE INDEX idx_users_server_id ON users(server_id);\nCREATE INDEX idx_users_id ON users(id);\n\nCREATE TABLE history_gov ( ts INTEGER,\n    username char(64),\n    max_simultaneous_requests INTEGER,\n    sum_cpu float,\n    sum_write float,\n    sum_read float,\n    number_of_iterations INTEGER,\n    max_cpu float,\n    max_write float,\n    max_read float,\n    number_of_restricts INTEGER,\n    limit_cpu_on_period_end INTEGER,\n    limit_read_on_period_end INTEGER,\n    limit_write_on_period_end INTEGER,\n    cause_of_restrict INTEGER,\n    weight INTEGER,\n    server_id char(10));\n\nCREATE INDEX idx_history_gov_ts ON history_gov(ts);\nCREATE INDEX idx_history_gov_cause_of_restrict ON history_gov(cause_of_restrict);\nCREATE INDEX idx_history_gov_number_of_restricts ON history_gov(number_of_restricts);\nCREATE INDEX idx_history_gov_max_simultaneous_requests ON history_gov(max_simultaneous_requests);\nCREATE INDEX idx_history_gov_server_id ON history_gov(server_id);\nCREATE INDEX idx_history_gov_weight ON history_gov(weight);\n\nCREATE TABLE last_run_gov (hourly TIMESTAMP, daily TIMESTAMP, server_id CHAR(10), lve_version INTEGER);\n\n     * Execute following SQL command for each remote server for which you want to store\n      statistics in this database (make sure you substitute _SERVER_NAME_ with the same\n      servername as used in lvestats config file on remote server:\n\nINSERT INTO last_run(hourly, daily, server_id, lve_version) VALUES (now() AT TIME ZONE 'UTC', now() AT TIME ZONE 'UTC', '_SERVER_NAME_', 4);\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("db_type = postgresql\nconnect_string = host:database:user:password\nserver_id = _SERVER_NAME_db_port = _port_\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),e("p",[this._v("lvestats.readonly should have a user that has read only access to history table.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),e("p",[e("em",[this._v("SERVER_NAME")]),this._v(" should be at most 10 characters")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),e("p",[this._v("db_port is optional, default PostgreSQL port will be used")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Select server responsible for compacting database on regular bases by setting "),e("span",{staticClass:"notranslate"},[this._v(" COMPACT=master ")]),this._v(" in "),e("span",{staticClass:"notranslate"},[this._v(" /etc/sysconfig/lvestats ")]),this._v(" for that server. Set "),e("span",{staticClass:"notranslate"},[this._v(" COMPACT=slave ")]),this._v(" on all other servers.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Make sure that "),e("span",{staticClass:"notranslate"},[this._v(" /etc/sysconfig/lvestats ")]),this._v(" is readable only by "),e("span",{staticClass:"notranslate"},[this._v(" root (chmod 600 /etc/sysconfig/lvestats), lvestats.readonly ")]),this._v(" should be readable by anyone.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("service lvestats restart\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ /usr/share/lve-stats/save_users_to_database.py \n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"compacting-in-multi-server-settings"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#compacting-in-multi-server-settings","aria-hidden":"true"}},[this._v("#")]),this._v(" Compacting in multi-server settings")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("On that server, edit file: "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/etc/sysconfig/lvestats")])]),this._v(" and change the option "),e("span",{staticClass:"notranslate"},[e("code",[this._v("COMPACT")])]),this._v(" to "),e("span",{staticClass:"notranslate"},[e("code",[this._v("master")])]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("On all other servers, change that option to "),e("span",{staticClass:"notranslate"},[e("code",[this._v("slave")])]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Default: "),e("span",{staticClass:"notranslate"},[e("code",[this._v("single")])]),this._v(" – should be used when lve-stats stores data to a single database.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"optimumcache"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#optimumcache","aria-hidden":"true"}},[this._v("#")]),this._v(" OptimumCache")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),e("p",[this._v("OPTIMUMCACHE IS NO LONGER SUPPORTED.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("OptimumCache 0.2+")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("OptimumCache is a de-duplicating file cache optimized specifically for shared hosting. Typical shared hosting server runs a number of sites with WordPress and Joomla as well as other popular software. This usually means that there are hundreds of duplicate files that are constantly being read into file cache - both wasting precious disk "),e("span",{staticClass:"notranslate"},[this._v(" IO ")]),this._v(" operations as well as memory. OptimumCache creates a cache of such duplicated files and de-duplicates file cache.\n"),e("img",{attrs:{src:"/images/embim1.png",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"installation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installation","aria-hidden":"true"}},[this._v("#")]),this._v(" Installation")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("NOTE")]),this._v(" "),e("p",[this._v("OPTIMUMCACHE IS NO LONGER SUPPORTED")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"requirements"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#requirements","aria-hidden":"true"}},[this._v("#")]),this._v(" Requirements")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("64bit CloudLinux 6.x or higher")]),this._v(" "),e("li",[this._v("ext4 filesystem")]),this._v(" "),e("li",[this._v("kernel lve1.2.55 or later.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"installation-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installation-2","aria-hidden":"true"}},[this._v("#")]),this._v(" Installation")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# yum install optimumcache\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("span",{staticClass:"notranslate"},[e("code",[this._v("# occtl --recursive --mark-dir /home")])])]),this._v(" "),e("li",[e("span",{staticClass:"notranslate"},[e("code",[this._v("# occtl --recursive --mark-dir /home2")])]),this._v(" (for cPanel)")]),this._v(" "),e("li",[e("span",{staticClass:"notranslate"},[e("code",[this._v("# occtl --recursive --mark-dir /var/www")])]),this._v(" (for Plesk)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("Allocating Disk Space for OptimumCache:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("By default OptimumCache will attempt to setup 5GB ploop (high efficiency loopback disk) to be used for the cache in "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/var/share/optimumcache/optimumcache.image")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("That ploop will be mounted to: "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/var/cache/optimumcache")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The ploop image will be located at "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/var/share/optimumcache/optimumcache.image")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("Moving ploop image to another location:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# occtl --move-ploop /path/to/new/image/file [new size[KMGT]]\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("/path/to/new/image/file")]),this._v(" must be file path + file name, not a directory name.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# occtl --move-ploop /var/ssh/optimumcache.image\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If "),e("span",{staticClass:"notranslate"},[e("code",[this._v("new size")])]),this._v(" is not mentioned, then value from "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/etc/sysconfig/optimumcache")])]),this._v(" is used. If "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/etc/sysconfig/optimumcache")])]),this._v(" does not mention anything regarding ploop image size, then default 5GB is used.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("Enabling and disabling ploop:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# occtl --init-ploop\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# occtl --disable-ploop\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If ploop image has been mounted in "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/etc/fstab")])]),this._v(" for OpimumCache-0.1-21 and earlier, you may consider removing this fstab entry in OpimumCache 0.2+. That is because since 0.2+ ploop is mounted automatically at service start.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If you prefer leave that fstab mount point as is, you may see some warnings when you decide to move ploop later via "),e("span",{staticClass:"notranslate"},[e("code",[this._v("occtl --move-ploop")])]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("Resizing ploop:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# occtl --resize-ploop [new size[KMGT]]\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("A common reason for resizing ploop is reacting to OptimumCache syslog message like "),e("span",{staticClass:"notranslate"},[this._v("“OptimumCache recommends cache storage size to be at least … GB”")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("Deleting ploop:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# occtl --delete-ploop\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("For the case when this action cannot be completed due to "),e("span",{staticClass:"notranslate"},[this._v("“Unable unmount ploop”")]),this._v(" issue, there is a workaround in “Troubleshooting” section.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"using-without-ploop"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#using-without-ploop","aria-hidden":"true"}},[this._v("#")]),this._v(" Using without ploop")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),e("p",[this._v("OPTIMUMCACHE IS NO LONGER SUPPORTED")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("On servers with kernel prior to lve1.2.55 ploop will not be used (due to ploop related issues in the kernel). Instead cached files will be stored in "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/var/cache/optimumcache")])]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The cache will be cleaned (shrunk) by 20% once partition on which "),e("span",{staticClass:"notranslate"},[e("code",[this._v("OPTIMUMCACHE_MNT")])]),this._v(" resides has only 10% of free space. You can change that by changing "),e("span",{staticClass:"notranslate"},[e("code",[this._v("PURGEAHEAD")])]),this._v(" param in "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/etc/sysconfig/optimumcache")])]),this._v(", and restarting optimumcache service.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The cache is cleaned "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/etc/cron.d/optimumcache_cron")])]),this._v(" script optimumcache_purge, which runs every minute:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("0-59 * * * * root /usr/share/optimumcache/optimumcache_purge\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"marking-directories"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#marking-directories","aria-hidden":"true"}},[this._v("#")]),this._v(" Marking directories")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),e("p",[this._v("OPTIMUMCACHE IS NO LONGER SUPPORTED")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("Marking directories to be cached:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# occtl --mark-dir /path/to/site/on/filesystem --recursive\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# occtl --mark-dir /home /home2 /home3 --recursive\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("OptimumCache is going to index these directories. Thus system load during this period (from hours to days) might be as twice as high. You can check indexing job status with "),e("span",{staticClass:"notranslate"},[e("code",[this._v("at -l")])]),this._v(" at any time.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("Ignoring particular files & directories:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ occtl --add-skip-mask REGEX\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ occtl --list-skip-mask\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ occtl --remove-skip-mask ID|Tag\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ occtl --check\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",{staticClass:"notranslate"},[e("code",[this._v("occtl --check")])]),this._v(" is the same lengthy operation as "),e("span",{staticClass:"notranslate"},[e("code",[this._v("marking")])]),this._v(" is. Thus, it’s usage has to be sane, especially for big "),e("span",{staticClass:"notranslate"},[e("code",[this._v("home")])]),this._v(" (>500G).")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th"),t._v(" "),s("th")])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("id")]),t._v(" "),s("td",[t._v("tag")]),t._v(" "),s("td",[t._v("regex")])]),t._v(" "),s("tr",[s("td",[t._v("1")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("all_dot_files")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("/\\...*")])])])]),t._v(" "),s("tr",[s("td",[t._v("2")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("cagefs")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home/cagefs-skeleton$")])])])]),t._v(" "),s("tr",[s("td",[t._v("3")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("cagefs")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home/cagefs-skeleton/")])])])]),t._v(" "),s("tr",[s("td",[t._v("4")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("cpanel")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home[^/]*/cPanelInstall")])])])]),t._v(" "),s("tr",[s("td",[t._v("5")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("cpanel")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home[^/]*/cpeasyapache")])])])]),t._v(" "),s("tr",[s("td",[t._v("6")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("cpanel")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home[^/]*/aquota")])])])]),t._v(" "),s("tr",[s("td",[t._v("7")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("cpanel")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home[^/]*/jailshell")])])])]),t._v(" "),s("tr",[s("td",[t._v("8")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("cpanel")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home[^/]*/[^/]+/mail$")])])])]),t._v(" "),s("tr",[s("td",[t._v("9")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("cpanel")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home[^/]*/[^/]+/mail/.*")])])])]),t._v(" "),s("tr",[s("td",[t._v("10")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("cpanel")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home[^/]*/[^/]+/logs$")])])])]),t._v(" "),s("tr",[s("td",[t._v("11")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("cpanel")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home[^/]*/[^/]+/logs/.*")])])])]),t._v(" "),s("tr",[s("td",[t._v("12")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("cpanel")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home[^/]*/[^/]+/\\.cpanel$")])])])]),t._v(" "),s("tr",[s("td",[t._v("13")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("cpanel")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home[^/]*/[^/]+/\\.cpanel/.*")])])])]),t._v(" "),s("tr",[s("td",[t._v("14")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("cpanel")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home[^/]*/[^/]+/\\.cagefs")])])])]),t._v(" "),s("tr",[s("td",[t._v("15")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("cpanel")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home[^/]*/[^/]+/\\.cagefs/.*")])])])]),t._v(" "),s("tr",[s("td",[t._v("16")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("cpanel")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home[^/]*/virtfs")])])])]),t._v(" "),s("tr",[s("td",[t._v("17")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("cpanel")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home[^/]*/virtfs/.*")])])])]),t._v(" "),s("tr",[s("td",[t._v("18")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("not_a_userdir")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home/tmp/")])])])]),t._v(" "),s("tr",[s("td",[t._v("19")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("not_a_userdir")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home/tmp$")])])])]),t._v(" "),s("tr",[s("td",[t._v("20")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("not_a_userdir")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home/ftp/")])])])]),t._v(" "),s("tr",[s("td",[t._v("21")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("not_a_userdir")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home/ftp$")])])])]),t._v(" "),s("tr",[s("td",[t._v("22")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("not_a_userdir")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home/admin/")])])])]),t._v(" "),s("tr",[s("td",[t._v("23")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("not_a_userdir")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home/admin$")])])])]),t._v(" "),s("tr",[s("td",[t._v("24")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("quota")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home[^/]*/quota.user$")])])])]),t._v(" "),s("tr",[s("td",[t._v("25")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("usermisc")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("/quota.user$")])])])]),t._v(" "),s("tr",[s("td",[t._v("26")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("users_home")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home/[^/]+/backups$")])])])]),t._v(" "),s("tr",[s("td",[t._v("27")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("users_home")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home/[^/]+/backups/")])])])]),t._v(" "),s("tr",[s("td",[t._v("28")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("users_home")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home/[^/]+/imap$")])])])]),t._v(" "),s("tr",[s("td",[t._v("29")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("users_home")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home/[^/]+/imap/")])])])]),t._v(" "),s("tr",[s("td",[t._v("30")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("users_home")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home/[^/]+/Maildir$")])])])]),t._v(" "),s("tr",[s("td",[t._v("31")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("users_home")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home/[^/]+/Maildir/")])])])]),t._v(" "),s("tr",[s("td",[t._v("32")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("users_home")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home/[^/]+/domains/[^/]+/logs$")])])])]),t._v(" "),s("tr",[s("td",[t._v("33")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("users_home")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home/[^/]+/domains/[^/]+/logs/")])])])]),t._v(" "),s("tr",[s("td",[t._v("34")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("users_home")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home/[^/]+/domains/[^/]+/public_ftp$")])])])]),t._v(" "),s("tr",[s("td",[t._v("35")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("users_home")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home/[^/]+/domains/[^/]+/public_ftp/")])])])]),t._v(" "),s("tr",[s("td",[t._v("36")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("users_home")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home/[^/]+/domains/[^/]+/stats$")])])])]),t._v(" "),s("tr",[s("td",[t._v("37")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("users_home")])])]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("^/home/[^/]+/domains/[^/]+/stats/")])])])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("This information is stored in "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/etc/container/optimumcache/ignore.d/")])]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("Skip mask syntax")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("For example, to disable caching all directories that contain "),e("span",{staticClass:"notranslate"},[e("code",[this._v("*/cache/*")])]),this._v(", you should use skip masks like:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("/cache/\n/cache$\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("This information is stored in "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/etc/container/optimumcache/ignore.d/")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"optimumcache-configuration-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#optimumcache-configuration-file","aria-hidden":"true"}},[this._v("#")]),this._v(" OptimumCache configuration file")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),e("p",[this._v("OPTIMUMCACHE IS NO LONGER SUPPORTED")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",{staticClass:"notranslate"},[e("code",[this._v("/etc/sysconfig/optimumcache")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("OPTIMUMCACHE_MNT=/var/cache/optimumcache\n\n \n# Valency to cache\n\nCOUNT=0\n\n \n# Minimal file size to cache, default - cache all files\n\n# MINSIZE=0\n\n \n# Minimal page number in file to start caching, default - 1\n\nPAGEMIN=0\n\n \n# Maximum file size to cache, 10485760 (10MB) by default\n\n# MAXSIZE\n\n \n# Interval between caching attempts, default - 5 seconds\n\n# TIMEOUT=7\n\n \n# Adaptive timeout upper limit (seconds)\n\n# MAXTIMEOUT=160\n\n \n# Adaptive timeout multiplicator and divisor\n\n# TIMEOUT_INCR_MUL=2\n\n# TIMEOUT_DECR_DIV=4\n\n \n# Buffer size in KB for 'optimumcache dump', default is 32MB\n\n# DUMP_BUFFER_SIZE=32000\n\n \n# Extra space in %% of requested to purge, default 20%\n\n# PURGEAHEAD=20\n\n \n# Experimental: Eliminate frequent sync to address IO performance\n\nNOIMMSYNC=1\n\n \n# Logging verbosity, default - 1, verbose\n\n# LOGLEVEL=1\n\n \n# occtl --mark-dir or --check operations IO limit, MB/s, default is 5 MB/s\n\n# OCCTL_LVE_IO_LIMIT=5\n\n \n# occtl --mark-dir or --check operations %cpu limit, default is 50% of one CPU core\n\n# OCCTL_LVE_SPEED_LIMIT=50\n\n \n# Lve ID to associate limits with\n\n# LVEID=5\n\n \n# Collect perf statistics in /var/log/optimumcache_perf. Default is enabled.\n\n# PERF_LOG_ENABLED=1\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"command-line-interface"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#command-line-interface","aria-hidden":"true"}},[this._v("#")]),this._v(" Command-line interface")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),e("p",[this._v("OPTIMUMCACHE IS NO LONGER SUPPORTED")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("OptimumCache is controlled using "),e("span",{staticClass:"notranslate"},[e("code",[this._v("occtl")])]),this._v(" command line utility.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("Usage:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("occtl.py    [-h] [--move-ploop param [param ...]] [--check] [--verbose]\n\n            [--init-ploop [param [param ...]]] [--resize-ploop New Size]\n\n            [--disable-ploop] [--enable-ploop] [--mount-ploop]\n\n            [--unmount-ploop] [--delete-ploop] [--unmark-all]\n\n            [--mark-dir Path [Path ...]] [--unmark-dir Path [Path ...]]\n\n            [--recursive]  [--add-skip-mask Regex]\n\n            [--remove-skip-mask Id|Tag] [--list-skip-mask] [--silent]\n\n            [--ignore-unmount-failure] [--no-lve-limits] [--foreground]\n\n            [--ploop-status] [--remount-cached-points] [--purge]\n\n            [--cancel-pending-jobs] [--report [Period]]\n\n            [--recommend-minmax-size]\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("optimumcache stat\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("optimumcache stat /home\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("optimumcache dump [--resolve-filenames] [mount]\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The option "),e("span",{staticClass:"notranslate"},[e("code",[this._v("--resolve-filenames")])]),this._v(" is experimental and may not apply to all output cached entries.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th")])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("-h")])]),t._v(", "),s("span",{staticClass:"notranslate"},[s("code",[t._v("--help")])])]),t._v(" "),s("td",[t._v("Show this help message and exit.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--move-ploop param [param ...]")])])]),t._v(" "),s("td",[t._v("Move cache from one ploop image to "),s("span",{staticClass:"notranslate"},[s("code",[t._v("/path/to/new/image/location [New Size[KMGT]]")])]),t._v(".")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--check")])])]),t._v(" "),s("td",[t._v("Check marked files for errors. This task is scheduled as background job, unless "),s("span",{staticClass:"notranslate"},[s("code",[t._v("--foreground")])]),t._v(" is specified.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--verbose")])])]),t._v(" "),s("td",[t._v("List what is being checked.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--init-ploop [param [param ...]]")])])]),t._v(" "),s("td",[t._v("Create ploop image for the cache "),s("span",{staticClass:"notranslate"},[s("code",[t._v("[/path/to/ploop/image [ploop_size] | ploop_size]")])]),t._v(" - if only one parameter is given, it is considered to be ploop size. Size should be a "),s("span",{staticClass:"notranslate"},[s("code",[t._v("NUMBER[KMGT]")])]),t._v(".")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--resize-ploop New Size")])])]),t._v(" "),s("td",[t._v("New Size NUMBER[KMGT].")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--disable-ploop")])])]),t._v(" "),s("td",[t._v("Disable ploop.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--enable-ploop")])])]),t._v(" "),s("td",[t._v("Enable ploop.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--mount-ploop")])])]),t._v(" "),s("td",[t._v("Mount ploop image.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--unmount-ploop")])])]),t._v(" "),s("td",[t._v("Unmount ploop image.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--delete-ploop")])])]),t._v(" "),s("td",[t._v("Delete ploop image. Implies disable ploop, if was enabled.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--unmark-all")])])]),t._v(" "),s("td",[t._v("Unmark all marked directories.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--mark-dir Path [Path ...]")])])]),t._v(" "),s("td",[t._v("Mark directory for caching.This task is scheduled as background job, unless "),s("span",{staticClass:"notranslate"},[s("code",[t._v("--foreground")])]),t._v(" is specified.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--unmark-dir Path [Path ...]")])])]),t._v(" "),s("td",[t._v("Unmark directory for caching.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--recursive")])])]),t._v(" "),s("td",[t._v("Is used with mark/unmark dir.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--add-skip-mask Regex")])])]),t._v(" "),s("td",[t._v("Regexp to skip files/directories for caching.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--remove-skip-mask Id|Tag")])])]),t._v(" "),s("td",[t._v("Remove regexp to skip files/directories by id or tag.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--list-skip-mask")])])]),t._v(" "),s("td",[t._v("List regexp to skip files/directories.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--silent")])])]),t._v(" "),s("td",[t._v("Do not echo status to stdout/syslog.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--ignore-unmount-failure")])])]),t._v(" "),s("td",[t._v("Ignore cannot unmount ploop problem.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--no-lve-limits")])])]),t._v(" "),s("td",[t._v("Ignore default LVE limits for "),s("span",{staticClass:"notranslate"},[s("code",[t._v("--mark-dir")])]),t._v(" and "),s("span",{staticClass:"notranslate"},[s("code",[t._v("--check")])]),t._v(" commands. Also implies --foreground.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--foreground")])])]),t._v(" "),s("td",[t._v("Don't spawn "),s("span",{staticClass:"notranslate"},[s("code",[t._v("--mark-dir")])]),t._v(" and "),s("span",{staticClass:"notranslate"},[s("code",[t._v("--check")])]),t._v(" commands in background.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--ploop-status")])])]),t._v(" "),s("td",[t._v("Check if ploop is mounted.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--purge")])])]),t._v(" "),s("td",[t._v("Purge cache storage (takes some time).")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--cancel-pending-jobs")])])]),t._v(" "),s("td",[t._v("Cancel "),s("span",{staticClass:"notranslate"},[s("code",[t._v("--mark-dir")])]),t._v(" and "),s("span",{staticClass:"notranslate"},[s("code",[t._v("--check")])]),t._v(" commands if were queued or are being run in background.")])]),t._v(" "),s("tr",[s("td",[s("span",{staticClass:"notranslate"},[s("code",[t._v("--report [Period]")])])]),t._v(" "),s("td",[t._v("Report statistics for Period (hourly")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"cloudlinux-collect-collect-system-load-statistics"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cloudlinux-collect-collect-system-load-statistics","aria-hidden":"true"}},[this._v("#")]),this._v(" cloudlinux-collect: collect system load statistics")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),e("p",[this._v("OPTIMUMCACHE IS NO LONGER SUPPORTED")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"cloudlinux-collectl-quick-start"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cloudlinux-collectl-quick-start","aria-hidden":"true"}},[this._v("#")]),this._v(" cloudlinux-collectl: quick start")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"install"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#install","aria-hidden":"true"}},[this._v("#")]),this._v(" Install")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# yum install cloudlinux-collect --enablerepo=cloudlinux-updates-testing\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),e("p",[this._v("cloudlinux-collectl will be installed automatically on optimumcache upgrade to 0.2-23")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"measure-web-site-response-time"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#measure-web-site-response-time","aria-hidden":"true"}},[this._v("#")]),this._v(" Measure web site response time")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# cloudlinux-collect --addurl <alias> <http://url\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# cloudlinux-collect --addurl localhost http://127.0.0.1/index.php\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Try "),e("span",{staticClass:"notranslate"},[e("code",[this._v("cloudlinux-collectl --help")])]),this._v(" for more options.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"to-watch-what-is-being-collected"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#to-watch-what-is-being-collected","aria-hidden":"true"}},[this._v("#")]),this._v(" To watch what is being collected")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# cloudlinux-collect --test\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Actual logs are compressed with gzip and kept in "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/var/log/optimumcache/collectl")])]),this._v(" directory.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"statistics-being-collected-in-details"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#statistics-being-collected-in-details","aria-hidden":"true"}},[this._v("#")]),this._v(" Statistics being collected in details")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# cloudlinux-collect --test\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/optimumcachecollect_zoom93.png",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Along with common statistics blocks as "),e("span",{staticClass:"notranslate"},[this._v("CPU")]),this._v(" , disk usage, "),e("span",{staticClass:"notranslate"},[this._v("inodes")]),this._v(" cached, there are two blocks of data to watch how effectively OptimumCache is functioning.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",{staticClass:"notranslate"},[e("code",[this._v("OPTIMUMCACHE DETAIL")])]),this._v(" refers to data, which is similar to output of command")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# optimumcache stat\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("csums:          4964 (99.9%)\n\n             fetched        uncached            cached\n\ninodes:          4967            31               4936    (99.4%)\n\nsize:          204177          131072           73104     (35.8%)\n\nRAM:                8              4                4     (50.0%)\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The next goes "),e("span",{staticClass:"notranslate"},[e("code",[this._v("URLSTATTRACKER DETAIL")])]),this._v(" block with url response time in milliseconds. Negative values here may pop up unexpectedly. Negative numbers are not milliseconds, but signal about http error response code for that specific url. For instance, -403 will signal for "),e("span",{staticClass:"notranslate"},[e("code",[this._v("Forbidden")])]),this._v(" http error. As for -500 value, it signals not only for "),e("span",{staticClass:"notranslate"},[e("code",[this._v("Internal Server Error")])]),this._v(", but can be displayed, when there is connection problem with the server, which is specified by the url.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"statistics-manual-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#statistics-manual-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Statistics manual configuration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",{staticClass:"notranslate"},[e("code",[this._v("URLSTATTRACKER DETAIL")])]),this._v(" is the only statistics, which requires manual configuration. Upon clean installation, it has only "),e("span",{staticClass:"notranslate"},[e("code",[this._v("url_localhost")])]),this._v(" preconfigured:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# cloudlinux-collect --info\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("url shortname            url\n\n--------------------         ---\n\nlocalhost                 http://localhost/\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("## cloudlinux-collect --addurl alt http://192.168.0.102/\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# cloudlinux-collect --info\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("url shortname          url\n\n--------------------          ---\n\nalt                        http://192.168.0.102/\n\nlocalhost                  http://localhost/\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# cloudlinux-collect --skip <url short name>\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"running-statistics-daemon-collectl-cloudlinux"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#running-statistics-daemon-collectl-cloudlinux","aria-hidden":"true"}},[this._v("#")]),this._v(" Running statistics daemon: collectl-cloudlinux")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("cloudlinux-collectl has got collectl package as a dependency. Initd script "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/etc/init.d/cloudlinux-collectl")])]),this._v(" will automatically bring up another instance of collectl named "),e("span",{staticClass:"notranslate"},[e("code",[this._v("collectl-optimumcache")])]),this._v(" . collectl-optimumcache daemon instance has a separate config and does not interfere with other running pre-configure collectl daemon (if any).")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("As it was mentioned, collectl-optimumcache daemon starts automatically on package install, then on server restart events, kicked by regular Initd script "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/etc/init.d/cloudlinux-collectl")])]),this._v(". Thus, checking the daemon status, stop, restart is trivial:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# service cloudlinux-collect status\ncollectl-optimumcache (pid  1745) is running…\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# service cloudlinux-collect < start | stop >\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"analyzing-the-results"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#analyzing-the-results","aria-hidden":"true"}},[this._v("#")]),this._v(" Analyzing the results")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The statistics is being collected into files named "),e("span",{staticClass:"notranslate"},[e("code",[this._v("%hostname%-%datetime%.raw.gz")])]),this._v(" under directory "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/var/log/cloudlinux-collect")])]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# cloudlinux-collect --genplotfiles\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("Generate fresh plot files in\n\n         /var/log/cloudlinux-collect/plotfiles\n\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"uninstall-optimumcache"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#uninstall-optimumcache","aria-hidden":"true"}},[this._v("#")]),this._v(" Uninstall OptimumCache")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),e("p",[this._v("OPTIMUMCACHE IS NO LONGER SUPPORTED")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("service optimumcache stop\nocctl --delete-ploop\n:>/var/share/optimumcache_store\nyum remove optimumcache\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("After the reboot "),e("span",{staticClass:"notranslate"},[e("code",[this._v("pfcache= mount")])]),this._v(" options will disappear by themselves.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# rm /var/share/optimumcache/optimumcache.image\n# rm /var/share/optimumcache/DiskDescriptor.xml\n# rm /var/share/optimumcache/DiskDescriptor.xml.lck\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# rm /path/to/ploop/image/file\n# rm /path/to/ploop/image/DiskDescriptor.xml\n# rm /path/to/ploop/image/DiskDescriptor.xml.lck\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"troubleshooting"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting","aria-hidden":"true"}},[this._v("#")]),this._v(" Troubleshooting")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),e("p",[this._v("OPTIMUMCACHE IS NO LONGER SUPPORTED")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"installing-for-fs-is-different-from-ext4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installing-for-fs-is-different-from-ext4","aria-hidden":"true"}},[this._v("#")]),this._v(" Installing for FS is different from Ext4")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("Preparing packages for installation...\n\nCannot continue: Ext4 partition is the only supported by OptimiumCache, there is no one in fstab\n\nerror: %pre(optimumcache-0.1-22.el6.cloudlinux.x86_64) scriptlet failed, exit status 1\n\nerror:   install: %pre scriptlet failed (2), skipping\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# occtl --mark-dir /home --recursive\n\nmount: / not mounted already, or bad option\n\noptimumcache: Can not mount device. rc[8192]\n\nError: mark[1]: /usr/bin/optimumcache mark --recursive /home\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"yum-fails-to-install-perl-rpms-coming-with-optimumcache"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#yum-fails-to-install-perl-rpms-coming-with-optimumcache","aria-hidden":"true"}},[this._v("#")]),this._v(" Yum fails to install Perl rpms coming with OptimumCache")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If got this error with "),e("span",{staticClass:"notranslate"},[e("code",[this._v("yum install optimumcache")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("Error: Package: cloudlinux-collect-0.1-6.el6.noarch (cloudlinux-x86_64-server-6)\n\nRequires: perl(Config::Tiny)\n\nError: Package: cloudlinux-collect-0.1-6.el6.noarch (cloudlinux-x86_64-server-6)\n\nRequires: perl(IO::Socket::SSL)\n\nError: Package: cloudlinux-collect-0.1-6.el6.noarch (cloudlinux-x86_64-server-6)\n\nRequires: perl(YAML::Tiny)\n\nError: Package: cloudlinux-collect-0.1-6.el6.noarch (cloudlinux-x86_64-server-6)\n\nRequires: perl(IPC::Run)\n\nYou could try using --skip-broken to work around the problem\n\nYou could try running: rpm -Va --nofiles --nodigest\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Most probably you have excluded "),e("span",{staticClass:"notranslate"},[e("code",[this._v("perl*")])]),this._v(" packages in "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/etc/yum.conf")])]),this._v(" file, in this case to install OptimumCache run:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# yum install optimumcache --disableexcludes=all\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"optimumcache-prior-0-2-23-cannot-unmount-old-ploop-image"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#optimumcache-prior-0-2-23-cannot-unmount-old-ploop-image","aria-hidden":"true"}},[this._v("#")]),this._v(" OptimumCache prior 0.2-23: Cannot unmount old ploop image")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("This is well-known ploop problem, which may result in failing such actions as resizing or moving ploop in OptimumCache. To workaround this problem use "),e("span",{staticClass:"notranslate"},[e("code",[this._v("--ignore-unmount-failure")])]),this._v(" with "),e("span",{staticClass:"notranslate"},[e("code",[this._v("--move-ploop")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# occtl --move-ploop --ignore-unmount-failure\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("As for resizing ploop, use flavor of "),e("span",{staticClass:"notranslate"},[e("code",[this._v("--move-ploop")])]),this._v(" command instead:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# occtl --move-ploop /path/to/new/image/file [size GB] --ignore-unmount-failure\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("For your changes to take effect, the server has to be rebooted. Upon reboot, you may clean up manually old ploop image file and "),e("span",{staticClass:"notranslate"},[e("code",[this._v("DiskDescriptor.xml")])]),this._v(" file, which resides in the same directory along with old image.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"high-io-rate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#high-io-rate","aria-hidden":"true"}},[this._v("#")]),this._v(" High IO rate")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("High "),s("span",{staticClass:"notranslate"},[t._v("IO")]),t._v(" problem was fixed in latest version of OptimumCache (version 0.2-6). The fix is to eliminate "),s("span",{staticClass:"notranslate"},[s("code",[t._v("superflows fsync()")])]),t._v(" calls in OptimumCache operations. To activate this fix in existing installation, flag "),s("span",{staticClass:"notranslate"},[s("code",[t._v("NOIMMSYNC=1")])]),t._v(" has to be manually set in "),s("span",{staticClass:"notranslate"},[s("code",[t._v("/etc/syscoconfig/optimumcache")])]),t._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("To ensure that this parameter is set "),e("span",{staticClass:"notranslate"},[e("code",[this._v("ON")])]),this._v(" in the config, set "),e("span",{staticClass:"notranslate"},[e("code",[this._v("LOGLEVEL=2")])]),this._v(" and execute "),e("span",{staticClass:"notranslate"},[e("code",[this._v("service optimumcache restart")])]),this._v(". You will see something like this:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("optimumcache[1770]: Hash-size: 100000000 min-size: 0 max-size: 18446744071562067968\noptimumcache[1770]: Count: 0 Timeout: 5\noptimumcache[1770]: Max Timeout: 160 Adaptive Timeout Mul/Div: 2/4\noptimumcache[1770]: Iolimit: 0 iopslimit: 0\noptimumcache[1770]: No immediate fsync: Yes\noptimumcache[1771]: Starting OptimumCache monitor\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# yum update optimumcache --enablerepo=cloudlinux-updates-testing\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"high-cpu-utilization"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#high-cpu-utilization","aria-hidden":"true"}},[this._v("#")]),this._v(" High CPU utilization")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Once it is detected that OptimumCache overuses "),e("span",{staticClass:"notranslate"},[this._v("CPU")]),this._v(", it is useful to check, whether checksums reindexing process is running. When reindexing is running, high "),e("span",{staticClass:"notranslate"},[this._v("CPU")]),this._v(" usage is ok, as far it will certainly drop down after reindexing finished.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Can be checked in "),e("span",{staticClass:"notranslate"},[e("code",[this._v("/var/log/messages")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# grep Reindexing /var/log/messages\n\nFeb  4 17:00:55 CL-default-2 occtl[2654]: Reindexing started\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If the last line from the output is not "),e("span",{staticClass:"notranslate"},[e("code",[this._v("Reindexing finished…")])]),this._v(", than indexing is in progress.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Also, can be checked via command "),e("span",{staticClass:"notranslate"},[e("code",[this._v("occtl --report")])]),this._v(", watch if "),e("span",{staticClass:"notranslate"},[e("code",[this._v("PFL_REINDEX_NUM_FILES")])]),this._v(" and "),e("span",{staticClass:"notranslate"},[e("code",[this._v("PFL_REINDEX_THOUGHPUT_KB")])]),this._v(" identifiers are present in the last series of data:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# occtl --report\n- Period starts at: 2015-02-04 17:00\nPeriod Stat:\n\nPFL_ATTACHED:                    170318\nPFL_CREATED:                     161583\nPFL_ERR_BAD_CSUM:                176\nPFL_ERR_INODES:                  879\nPFL_FAILED_TO_ATTACH_PEER:       791\nPFL_FAILED_TO_ATTACH_PEER_EBUSY: 791\n\nPFL_INODE_IN:                    406167\nPFL_PAGEMIN_FILTERED_OUT:        233418\nPFL_PAGEMIN_USED:                136082\nPFL_REINDEX_NUM_FILES:           192810\nPFL_REINDEX_THOUGHPUT_KB:        2904007\nPFL_RESTART:                     1\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"uninstalling-optimumcache-lasts-for-too-long"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#uninstalling-optimumcache-lasts-for-too-long","aria-hidden":"true"}},[this._v("#")]),this._v(" Uninstalling OptimumCache lasts for too long")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Uninstalling OptimumCache takes time because of files unmark process, which lasts proportionally to number of files, previously marked for caching with "),e("span",{staticClass:"notranslate"},[e("code",[this._v("occtl --mark-dir...")])]),this._v(". If you see, that "),e("span",{staticClass:"notranslate"},[e("code",[this._v("yum remove optimumcache")])]),this._v(" command is stuck and you have no time to wait for it to finish, or "),e("span",{staticClass:"notranslate"},[this._v("IO")]),this._v(" load, caused by unmarking files, is undesirable for you, open another console terminal and invoke:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# occtl --cancel-pending-jobs\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"‘failed-to-attach-peer-invalid-argument’-appears-in-syslog"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#‘failed-to-attach-peer-invalid-argument’-appears-in-syslog","aria-hidden":"true"}},[this._v("#")]),this._v(" ‘Failed to attach peer: Invalid argument’ appears in syslog")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Rather rare problem, try to forcibly update "),e("code",[this._v("optimumcache_s")]),this._v(" with ploop status.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# occtl --remount-cached-points\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"tpe-extension"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tpe-extension","aria-hidden":"true"}},[this._v("#")]),this._v(" TPE extension")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("TPE (Trusted Path Execution)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The kernel supports "),e("span",{staticClass:"notranslate"},[this._v(" TPE ")]),this._v(" feature out of the box. You can configure it using following files:\n")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("p"),this._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("·        /proc/sys/kernel/grsecurity/grsec_lock\n·        /proc/sys/kernel/grsecurity/tpe\n·        /proc/sys/kernel/grsecurity/tpe_gid\n·        /proc/sys/kernel/grsecurity/tpe_restrict_all\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("To enable "),e("span",{staticClass:"notranslate"},[this._v(" TPE ")]),this._v(" feature in a standard way just add following to the end of your "),e("span",{staticClass:"notranslate"},[this._v(" /etc/sysctl.conf ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("p"),this._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("#GRsecurity \nkernel.grsecurity.tpe = 1 \nkernel.grsecurity.tpe_restrict_all = 1 \nkernel.grsecurity.grsec_lock = 1  \n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("p"),this._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# sysctl -p\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),e("p",[this._v("Once you set grsec_lock to 1, you will not be able to change TPE options without reboot.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("This "),e("span",{staticClass:"notranslate"},[this._v("Trusted Path Execution")]),this._v(" feature was adopted from "),e("span",{staticClass:"notranslate"},[this._v("grsecurity")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"cpu-limits"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cpu-limits","aria-hidden":"true"}},[this._v("#")]),this._v(" CPU limits")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"cpu-limits-before-lve-utils-1-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cpu-limits-before-lve-utils-1-4","aria-hidden":"true"}},[this._v("#")]),this._v(" CPU limits before lve-utils 1.4")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[s("span",{staticClass:"notranslate"},[t._v(" CPU ")]),t._v(" Limits are set by "),s("span",{staticClass:"notranslate"},[t._v(" CPU ")]),t._v(" and "),s("span",{staticClass:"notranslate"},[t._v(" NCPU ")]),t._v(" parameters. "),s("span",{staticClass:"notranslate"},[t._v(" CPU ")]),t._v(" specifies the % of total "),s("span",{staticClass:"notranslate"},[t._v(" CPU ")]),t._v(" of the server available to LVE. "),s("span",{staticClass:"notranslate"},[t._v(" NCPU ")]),t._v(" specifies the number of cores available to LVE. The smallest of the two is used to define how much "),s("span",{staticClass:"notranslate"},[t._v(" CPU ")]),t._v(" power will be accessible to the customer.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th"),t._v(" "),s("th"),t._v(" "),s("th")])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Cores Per Server")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[t._v(" CPU ")]),t._v(" Limit")]),t._v(" "),s("td",[s("span",{staticClass:"notranslate"},[t._v(" NCPU ")]),t._v(" Limit")]),t._v(" "),s("td",[t._v("Real limit")])]),t._v(" "),s("tr",[s("td",[t._v("1")]),t._v(" "),s("td",[t._v("25%")]),t._v(" "),s("td",[t._v("1")]),t._v(" "),s("td",[t._v("25% of 1 core")])]),t._v(" "),s("tr",[s("td",[t._v("2")]),t._v(" "),s("td",[t._v("25%")]),t._v(" "),s("td",[t._v("1")]),t._v(" "),s("td",[t._v("50% of 1 core")])]),t._v(" "),s("tr",[s("td",[t._v("2")]),t._v(" "),s("td",[t._v("25%")]),t._v(" "),s("td",[t._v("2")]),t._v(" "),s("td",[t._v("50% of 1 core")])]),t._v(" "),s("tr",[s("td",[t._v("4")]),t._v(" "),s("td",[t._v("25%")]),t._v(" "),s("td",[t._v("1")]),t._v(" "),s("td",[t._v("100% of 1 core (full core)")])]),t._v(" "),s("tr",[s("td",[t._v("4")]),t._v(" "),s("td",[t._v("25%")]),t._v(" "),s("td",[t._v("2")]),t._v(" "),s("td",[t._v("1 core")])]),t._v(" "),s("tr",[s("td",[t._v("4")]),t._v(" "),s("td",[t._v("50%")]),t._v(" "),s("td",[t._v("1")]),t._v(" "),s("td",[t._v("1 core")])]),t._v(" "),s("tr",[s("td",[t._v("4")]),t._v(" "),s("td",[t._v("50%")]),t._v(" "),s("td",[t._v("2")]),t._v(" "),s("td",[t._v("2 cores")])]),t._v(" "),s("tr",[s("td",[t._v("8")]),t._v(" "),s("td",[t._v("25%")]),t._v(" "),s("td",[t._v("1")]),t._v(" "),s("td",[t._v("1 core")])]),t._v(" "),s("tr",[s("td",[t._v("8")]),t._v(" "),s("td",[t._v("25%")]),t._v(" "),s("td",[t._v("2")]),t._v(" "),s("td",[t._v("2 cores")])]),t._v(" "),s("tr",[s("td",[t._v("8")]),t._v(" "),s("td",[t._v("50%")]),t._v(" "),s("td",[t._v("2")]),t._v(" "),s("td",[t._v("2 cores")])]),t._v(" "),s("tr",[s("td",[t._v("8")]),t._v(" "),s("td",[t._v("50%")]),t._v(" "),s("td",[t._v("3")]),t._v(" "),s("td",[t._v("3 cores")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("When user hits "),s("span",{staticClass:"notranslate"},[t._v(" CPU ")]),t._v(" limit, processes within that limit are slowed down. For example, if you set your "),s("span",{staticClass:"notranslate"},[t._v(" CPU ")]),t._v(" limit to 10%, and processes inside LVE want to use more then 10% they will be throttled (put to sleep) to make sure they don't use more then 10%. In reality, processes don't get "),s("span",{staticClass:"notranslate"},[t._v(" CPU ")]),t._v(" time above the limit, and it happens much more often then 1 second interval, but the end result is that processes are slowed down so that their usage is never above the "),s("span",{staticClass:"notranslate"},[t._v(" CPU ")]),t._v(" limit set.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"package-integration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#package-integration","aria-hidden":"true"}},[this._v("#")]),this._v(" Package integration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),e("p",[this._v("Deprecated.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("[lve-utils 1.4+]")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("Implementing script")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("100 package1\n101 package1\n102 package2\n103 package3\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",{staticClass:"notranslate"},[this._v("--userid=id prints package for a user specified ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("package1\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",{staticClass:"notranslate"},[this._v('--package="package"    prints users for a package specified. ')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("100\n101\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",{staticClass:"notranslate"},[this._v("--list-packages prints the list of packages ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("package1\npackage2\npackage3\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("Configuring lvectl to use your custom script")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Edit "),e("span",{staticClass:"notranslate"},[this._v("/etc/sysconfig/cloudlinux ")]),this._v(" file.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Edit or modify parameter "),e("span",{staticClass:"notranslate"},[e("code",[this._v("CUSTOM_GETPACKAGE_SCRIPT")])]),this._v(", and set it to point to your script, like: "),e("span",{staticClass:"notranslate"},[e("code",[this._v("CUSTOM_GETPACKAGE_SCRIPT=/absolute/path/to/your/script")])])])}],!1,null,null,null);e.default=i.exports}}]);